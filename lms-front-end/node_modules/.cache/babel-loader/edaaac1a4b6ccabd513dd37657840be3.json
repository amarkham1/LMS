{"ast":null,"code":"import _objectSpread from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Modals/AddPropertyModal/addpropertymodal.js\";\nimport React from 'react';\nimport './addpropertymodal.css';\nimport Select from 'react-select';\nimport { css } from 'emotion';\n\nfunction validate(propertyname, address, city, rentablearea, storeys) {\n  return {\n    propertyname: propertyname.length === 0,\n    address: address.length === 0,\n    city: city.length === 0,\n    rentablearea: validateNumber(rentablearea),\n    storeys: validateNumber(storeys)\n  };\n}\n\nfunction validateNumber(input) {\n  var number = /^\\d+$/;\n  return !(number.test(input) && input.length > 1);\n}\n\nvar AddPropertyModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddPropertyModal, _React$Component);\n\n  function AddPropertyModal(props) {\n    var _this;\n\n    _classCallCheck(this, AddPropertyModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddPropertyModal).call(this, props));\n\n    _this.onChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleBlur = function (field) {\n      return function (event) {\n        _this.setState({\n          touched: _objectSpread({}, _this.state.touched, _defineProperty({}, field, true))\n        });\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      if (!_this.canBeSubmitted()) {\n        _this.setState({\n          touched: _objectSpread({}, _this.state.touched, {\n            'propertyname': true,\n            'city': true,\n            'address': true,\n            'rentablearea': true,\n            'storeys': true\n          })\n        });\n\n        event.preventDefault();\n        return;\n      }\n\n      var units = [];\n\n      for (var i = 1; i <= _this.state.storeys; i++) {\n        _this.state.units.push(\"\".concat(i, \"00\"));\n      }\n\n      fetch('http://localhost:3000/propertyedit', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          propertyname: _this.state.propertyname,\n          address: _this.state.address,\n          city: _this.state.city,\n          rentablearea: _this.state.rentablearea,\n          storeys: _this.state.storeys,\n          siteareasf: _this.state.siteareasf,\n          yearbuilt: _this.state.yearbuilt,\n          yearacquired: _this.state.yearacquired\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (property) {\n        if (property) {\n          _this.props.handlePropertyNoAdd();\n\n          fetch('http://localhost:3000/units', {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              propertyname: property.propertyname,\n              units: _this.state.units,\n              rentablearea: property.rentablearea,\n              storeys: property.storeys\n            })\n          });\n        }\n      });\n      /**/\n\n      _this.stateClear();\n    };\n\n    _this.stateClear = function () {\n      _this.setState({\n        touched: false,\n        propertyname: '',\n        address: '',\n        city: '',\n        rentablearea: '',\n        storeys: '',\n        siteareasf: '',\n        yearbuilt: '',\n        yearacquired: ''\n      });\n    };\n\n    _this.state = {\n      propertyname: '',\n      address: '',\n      city: '',\n      rentablearea: '',\n      storeys: '',\n      siteareasf: '',\n      yearbuilt: '',\n      yearacquired: '',\n      units: [],\n      fetchDone: false,\n      touched: {\n        propertyname: false,\n        address: false,\n        city: false,\n        rentablearea: false,\n        storeys: false,\n        siteareasf: false,\n        yearbuilt: false,\n        yearacquired: false\n      }\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleBlur = _this.handleBlur.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.stateClear = _this.stateClear.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddPropertyModal, [{\n    key: \"canBeSubmitted\",\n    value: function canBeSubmitted() {\n      var errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.rentablearea, this.state.storeys);\n      var isDisabled = Object.keys(errors).some(function (x) {\n        return errors[x];\n      });\n      return !isDisabled;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.rentablearea, this.state.storeys);\n      var isDisabled = Object.keys(errors).some(function (x) {\n        return errors[x];\n      });\n\n      var shouldMarkError = function shouldMarkError(field) {\n        return errors[field] && _this2.state.touched[field];\n      };\n\n      var showHideClassName = this.props.show ? 'property-modal property-display-block' : 'property-modal property-display-none';\n      return React.createElement(\"div\", {\n        className: showHideClassName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"property-modal-main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"property-modal-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Add New Property\"), \",\", React.createElement(\"div\", {\n        className: \"property-modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: shouldMarkError('propertyname') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Property Name:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.propertyname,\n        onChange: this.onChange('propertyname'),\n        onBlur: this.handleBlur('propertyname'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('address') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Address:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.address,\n        onChange: this.onChange('address'),\n        onBlur: this.handleBlur('address'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('city') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"City:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.city,\n        onChange: this.onChange('city'),\n        onBlur: this.handleBlur('city'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('rentablearea') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Rentable Area:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.rentablearea,\n        onChange: this.onChange('rentablearea'),\n        onBlur: this.handleBlur('rentablearea'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), shouldMarkError('rentablearea') ? React.createElement(\"p\", {\n        className: \"error_text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Please provide a first name.\") : null, React.createElement(\"p\", {\n        className: shouldMarkError('storeys') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Storeys:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.storeys,\n        onChange: this.onChange('storeys'),\n        onBlur: this.handleBlur('storeys'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('siteareasf') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Site Area SF:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.siteareasf,\n        onChange: this.onChange('siteareasf'),\n        onBlur: this.handleBlur('siteareasf'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('yearbuilt') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Year Built:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.yearbuilt,\n        onChange: this.onChange('yearbuilt'),\n        onBlur: this.handleBlur('yearbuilt'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('yearacquired') ? \"property-input-title-error\" : \"property-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Year Acquired:\"), React.createElement(\"input\", {\n        type: \"input\",\n        className: \"property-form-input\",\n        value: this.state.yearacquired,\n        onChange: this.onChange('yearacquired'),\n        onBlur: this.handleBlur('yearacquired'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, isDisabled ? React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"button add-button-error\",\n        onClick: function onClick(event) {\n          return _this2.handleSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }) : React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"button add-button\",\n        onClick: function onClick(event) {\n          return _this2.handleSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"cancel\",\n        value: \"Cancel\",\n        className: \"button cancel-button\",\n        onClick: function onClick(event) {\n          _this2.stateClear();\n\n          _this2.props.handlePropertyNoAdd();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      })))), \")}\")));\n    }\n  }]);\n\n  return AddPropertyModal;\n}(React.Component);\n\n;\nexport default AddPropertyModal;","map":{"version":3,"sources":["/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Modals/AddPropertyModal/addpropertymodal.js"],"names":["React","Select","css","validate","propertyname","address","city","rentablearea","storeys","length","validateNumber","input","number","test","AddPropertyModal","props","onChange","name","event","setState","target","value","handleBlur","field","touched","state","handleSubmit","canBeSubmitted","preventDefault","units","i","push","fetch","method","headers","body","JSON","stringify","siteareasf","yearbuilt","yearacquired","then","response","json","property","handlePropertyNoAdd","stateClear","fetchDone","bind","errors","isDisabled","Object","keys","some","x","shouldMarkError","showHideClassName","show","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './addpropertymodal.css';\nimport Select from 'react-select';\nimport {css} from 'emotion';\n\nfunction validate(propertyname, address, city, rentablearea, storeys) { \n  return {\n    propertyname: (propertyname.length === 0),\n    address: (address.length === 0),\n    city: (city.length === 0),\n    rentablearea: validateNumber(rentablearea),\n    storeys: validateNumber(storeys),\n  };\n}\n\nfunction validateNumber(input) {\n   var number = /^\\d+$/;\n   return !(number.test(input) && input.length > 1);\n}\n\nclass AddPropertyModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      propertyname: '',\n      address: '',\n      city: '',\n      rentablearea: '',\n      storeys: '',\n      siteareasf: '',\n      yearbuilt: '',\n      yearacquired: '',\n      units: [],\n      fetchDone: false,\n      touched: {\n        propertyname: false,\n        address: false,\n        city: false,\n        rentablearea: false,\n        storeys: false,\n        siteareasf: false,\n        yearbuilt: false,\n        yearacquired: false,\n      },\n    }\n\n    this.onChange = this.onChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.stateClear = this.stateClear.bind(this);\n  }\n\n  onChange = name => event => {\n    this.setState({ [name]: event.target.value});\n  }\n\n  handleBlur = (field) => (event) => {\n      this.setState({\n        touched: { ...this.state.touched, [field]: true},\n      });   \n  }\n \n  canBeSubmitted() {\n    const errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.rentablearea, this.state.storeys);\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\n    return !isDisabled;\n  }\n\n  handleSubmit = (event) => {\n    if (!this.canBeSubmitted()) {\n      this.setState({\n        touched: { ...this.state.touched, 'propertyname': true, 'city': true, 'address': true, 'rentablearea': true, 'storeys': true}\n      })\n      event.preventDefault();\n      return;\n    }\n\n    const units = [];\n    for (var i = 1; i <= this.state.storeys; i++) {\n      this.state.units.push(`${i}00`);\n    }\n\n    fetch('http://localhost:3000/propertyedit', {\n      method: 'post',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({\n        propertyname: this.state.propertyname,\n        address: this.state.address,\n        city: this.state.city,\n        rentablearea: this.state.rentablearea,\n        storeys: this.state.storeys,\n        siteareasf: this.state.siteareasf,\n        yearbuilt: this.state.yearbuilt,\n        yearacquired: this.state.yearacquired,\n      })\n    })\n      .then(response => response.json())\n      .then(property => {\n        if(property) {\n          this.props.handlePropertyNoAdd();\n          fetch('http://localhost:3000/units', {\n            method: 'post',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n              propertyname: property.propertyname,\n              units: this.state.units,\n              rentablearea: property.rentablearea,\n              storeys: property.storeys,\n            })\n          })\n        }\n      })\n/**/\n\n    this.stateClear();\n  }\n\n  stateClear = () => {\n    this.setState({\n      touched: false,\n      propertyname: '',\n      address: '',\n      city: '',\n      rentablearea: '',\n      storeys: '',\n      siteareasf: '',\n      yearbuilt: '',\n      yearacquired: '',\n    });\n  }\n\n  render() {\n    const errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.rentablearea, this.state.storeys);\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\n    const shouldMarkError = (field) => {\n      return errors[field] && this.state.touched[field];\n    }\n\n    const showHideClassName = this.props.show ? 'property-modal property-display-block' : 'property-modal property-display-none';\n    return (\n      <div className={showHideClassName}>\n        <React.Fragment>\n        <section className='property-modal-main'>\n           <React.Fragment>\n            <div className=\"property-modal-title\">Add New Property</div>,\n            <div className=\"property-modal-body\">\n\n              <p className={shouldMarkError('propertyname') ? \"property-input-title-error\" : \"property-input-title\"}>Property Name:</p>\n              <input\n                type = \"input\"\n                className = \"property-form-input\"\n                value = { this.state.propertyname }\n                onChange = { this.onChange('propertyname') }\n                onBlur = { this.handleBlur('propertyname') }\n              />\n\n              <p className={shouldMarkError('address') ? \"property-input-title-error\" : \"property-input-title\"}>Address:</p>\n              <input\n                type = \"input\"\n                className= \"property-form-input\"\n                value = { this.state.address }\n                onChange = { this.onChange('address') }\n                onBlur = { this.handleBlur('address') }\n              />\n\n              <p className={shouldMarkError('city') ? \"property-input-title-error\" : \"property-input-title\"}>City:</p>\n              <input\n                type = \"input\"\n                className= \"property-form-input\"\n                value = { this.state.city }\n                onChange = { this.onChange('city') }\n                onBlur = { this.handleBlur('city') }\n              />\n\n              <p className={shouldMarkError('rentablearea') ? \"property-input-title-error\" : \"property-input-title\"}>Rentable Area:</p>\n              <input\n                type = \"input\"\n                className= \"property-form-input\"\n                value = { this.state.rentablearea }\n                onChange = { this.onChange('rentablearea') }\n                onBlur = { this.handleBlur('rentablearea') }\n              />\n              { shouldMarkError('rentablearea') ? (\n                <p className=\"error_text\">Please provide a first name.</p>\n                ) : null\n              }\n\n              <p className={shouldMarkError('storeys') ? \"property-input-title-error\" : \"property-input-title\"}>Storeys:</p>\n              <input\n                type = \"input\"\n                className= \"property-form-input\"\n                value = { this.state.storeys }\n                onChange = { this.onChange('storeys') }\n                onBlur = { this.handleBlur('storeys') }\n              />\n\n              <p className={shouldMarkError('siteareasf') ? \"property-input-title-error\" : \"property-input-title\"}>Site Area SF:</p>\n              <input\n                type = \"input\"\n                className= \"property-form-input\"\n                value = { this.state.siteareasf }\n                onChange = { this.onChange('siteareasf') }\n                onBlur = { this.handleBlur('siteareasf') }\n              />\n\n              <p className={shouldMarkError('yearbuilt') ? \"property-input-title-error\" : \"property-input-title\"}>Year Built:</p>\n              <input\n                type = \"input\"\n                className = \"property-form-input\"\n                value = { this.state.yearbuilt }\n                onChange = { this.onChange('yearbuilt') }\n                onBlur = { this.handleBlur('yearbuilt') }\n              />\n\n              <p className={shouldMarkError('yearacquired') ? \"property-input-title-error\" : \"property-input-title\"}>Year Acquired:</p>\n              <input\n                type = \"input\"\n                className = \"property-form-input\"\n                value = { this.state.yearacquired }\n                onChange = { this.onChange('yearacquired') }\n                onBlur = { this.handleBlur('yearacquired') }\n              />\n\n              <div className=\"line\"></div>\n              <div className=\"buttons\">\n\n              { isDisabled ? (\n                <input \n                  type=\"submit\" \n                  className=\"button add-button-error\"\n                  onClick={ (event) => this.handleSubmit(event)}\n                />\n              ) : (\n                <input \n                  type=\"submit\" \n                  className=\"button add-button\"\n                  onClick={ (event) => this.handleSubmit(event)}\n                />\n              )}\n\n              <input\n                type=\"cancel\"\n                value=\"Cancel\"\n                className=\"button cancel-button\"\n                onClick={ (event) => { this.stateClear(); this.props.handlePropertyNoAdd(); }}\n              />\n\n              </div>\n            </div>\n        </React.Fragment>\n       )}\n        </section>\n        </React.Fragment>\n      </div>\n    );\n  }\n};\n\nexport default AddPropertyModal;"]},"metadata":{},"sourceType":"module"}