{"ast":null,"code":"import _regeneratorRuntime from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Modals/AddPropertyModal/addpropertymodal.js\";\nimport React from 'react';\nimport './addpropertymodal.css';\nimport Select from 'react-select';\nimport { css } from 'emotion';\n\nfunction validate(propertyname, address, city, province, rentablearea, storeys) {\n  return {\n    propertyname: propertyname.length === 0,\n    address: address.length === 0,\n    city: city.length === 0,\n    province: province.length === 0,\n    rentablearea: rentablearea.length === 0,\n    storeys: storeys.length === 0\n  };\n}\n\nvar AddcityModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddcityModal, _React$Component);\n\n  function AddcityModal(props) {\n    var _this;\n\n    _classCallCheck(this, AddcityModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddcityModal).call(this, props));\n\n    _this.onpropertynameChange = function (event) {\n      _this.setState({\n        propertyname: event.value.propertynamename\n      });\n\n      console.log(_this.state.propertyname);\n    };\n\n    _this.oncityChange = function (event) {\n      _this.setState({\n        city: event.value.cityname\n      });\n\n      fetch('http://localhost:3000/addpropertymodal/address', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          city: event.value.cityname\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (addresss) {\n        addresss.forEach(function (element) {\n          var dropDownEle = {\n            label: element[\"address\"],\n            value: element\n          };\n\n          _this.state.addressDropdown.push(dropDownEle);\n        });\n\n        _this.setState({\n          cityLoaded: true\n        });\n      });\n    };\n\n    _this.onaddressChange = function (event) {\n      _this.setState({\n        address: event.value.address\n      });\n    };\n\n    _this.onprovinceChange = function (event) {\n      _this.setState({\n        province: event.value.brokername\n      });\n    };\n\n    _this.onrentableareaChange = function (event) {\n      _this.setState({\n        rentablearea: event.value.brokername\n      });\n    };\n\n    _this.handleBlur = function (field) {\n      return function (event) {\n        _this.setState({\n          touched: _objectSpread({}, _this.state.touched, _defineProperty({}, field, true))\n        });\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      if (!_this.canBeSubmitted()) {\n        _this.setState({\n          touched: _objectSpread({}, _this.state.touched, {\n            'propertyname': true,\n            'city': true,\n            'address': true,\n            'province': true,\n            'rentablearea': true\n          })\n        });\n\n        event.preventDefault();\n        return;\n      }\n\n      fetch('http://localhost:3000/dealsedit', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          propertyname: _this.state.propertyname,\n          city: _this.state.city,\n          address: _this.state.address,\n          province: _this.state.province,\n          rentablearea: _this.state.rentablearea\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (deal) {\n        if (deal) {\n          _this.props.handlecityNoAdd();\n        } else {\n          console.log(\"uhoh\");\n        }\n      });\n\n      _this.stateClear();\n    };\n\n    _this.stateClear = function () {\n      _this.setState({\n        touched: false,\n        propertyname: '',\n        address: '',\n        city: '',\n        province: '',\n        rentablearea: ''\n      });\n    };\n\n    _this.state = {\n      propertyname: '',\n      address: '',\n      city: '',\n      province: '',\n      rentablearea: '',\n      touched: {\n        propertyname: false,\n        address: false,\n        city: false,\n        province: false,\n        rentablearea: false\n      },\n      propertynameDropdown: [],\n      cityDropdown: [],\n      addressDropdown: [],\n      provinceDropdown: [],\n      rentableareaDropdown: [],\n      cityLoaded: false,\n      loaded: false\n    };\n    return _this;\n  }\n\n  _createClass(AddcityModal, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('http://localhost:3000/addpropertymodal/propertyname', {\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (property) {\n                  property.forEach(function (element) {\n                    var dropDownEle = {\n                      label: element[\"propertynamename\"],\n                      value: element\n                    };\n\n                    _this2.state.propertynameDropdown.push(dropDownEle);\n                  });\n                });\n\n              case 2:\n                _context.next = 4;\n                return fetch('http://localhost:3000/addpropertymodal/city', {\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (properties) {\n                  properties.forEach(function (element) {\n                    var dropDownEle = {\n                      label: element[\"cityname\"],\n                      value: element\n                    };\n\n                    _this2.state.cityDropdown.push(dropDownEle);\n                  });\n                });\n\n              case 4:\n                _context.next = 6;\n                return fetch('http://localhost:3000/addpropertymodal/province', {\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (provinces) {\n                  provinces.forEach(function (element) {\n                    var dropDownEle = {\n                      label: element[\"brokername\"],\n                      value: element\n                    };\n\n                    _this2.state.provinceDropdown.push(dropDownEle);\n                  });\n                });\n\n              case 6:\n                _context.next = 8;\n                return fetch('http://localhost:3000/addpropertymodal/rentablearea', {\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (rentableareas) {\n                  rentableareas.forEach(function (element) {\n                    var dropDownEle = {\n                      label: element[\"brokername\"],\n                      value: element\n                    };\n\n                    _this2.state.rentableareaDropdown.push(dropDownEle);\n                  });\n                });\n\n              case 8:\n                this.setState({\n                  loaded: true\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"canBeSubmitted\",\n    value: function canBeSubmitted() {\n      var errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.province, this.state.rentablearea);\n      var isDisabled = Object.keys(errors).some(function (x) {\n        return errors[x];\n      });\n      return !isDisabled;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.province, this.state.rentablearea);\n      var isDisabled = Object.keys(errors).some(function (x) {\n        return errors[x];\n      });\n\n      var shouldMarkError = function shouldMarkError(field) {\n        return errors[field] && _this3.state.touched[field];\n      };\n\n      var showHideClassName = this.props.show ? 'deal-modal deal-display-block' : 'deal-modal deal-display-none';\n      return React.createElement(\"div\", {\n        className: showHideClassName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"deal-modal-main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, this.state.loaded && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"deal-modal-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Add New Deal\"), \",\", React.createElement(\"div\", {\n        className: \"deal-modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: shouldMarkError('propertyname') ? \"deal-input-title-error\" : \"deal-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"propertyname Name:\"), React.createElement(Select, {\n        options: this.state.propertynameDropdown,\n        className: \"deal-form-input\",\n        classNamePrefix: \"deal-form-input\",\n        onChange: this.onpropertynameChange.bind(this),\n        onBlur: this.handleBlur('propertyname'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('city') ? \"deal-input-title-error\" : \"deal-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"city:\"), React.createElement(Select, {\n        options: this.state.cityDropdown,\n        className: \"deal-form-input\",\n        classNamePrefix: \"deal-form-input\",\n        onChange: this.oncityChange.bind(this),\n        onBlur: this.handleBlur('city'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), this.state.cityLoaded ? [React.createElement(\"p\", {\n        className: shouldMarkError('address') ? \"deal-input-title-error\" : \"deal-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"address:\"), React.createElement(Select, {\n        options: this.state.addressDropdown,\n        className: \"deal-form-input\",\n        classNamePrefix: \"deal-form-input\",\n        onChange: this.onaddressChange.bind(this),\n        onBlur: this.handleBlur('address'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })] : null, React.createElement(\"p\", {\n        className: shouldMarkError('province') ? \"deal-input-title-error\" : \"deal-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Landlord Broker:\"), React.createElement(Select, {\n        options: this.state.provinceDropdown,\n        className: \"deal-form-input\",\n        classNamePrefix: \"deal-form-input\",\n        onChange: this.onprovinceChange.bind(this),\n        onBlur: this.handleBlur('province'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: shouldMarkError('rentablearea') ? \"deal-input-title-error\" : \"deal-input-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"propertyname Broker:\"), React.createElement(Select, {\n        options: this.state.rentableareaDropdown,\n        className: \"deal-form-input\",\n        classNamePrefix: \"deal-form-input\",\n        onChange: this.onrentableareaChange.bind(this),\n        onBlur: this.handleBlur('rentablearea'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, isDisabled ? React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"button add-button-error\",\n        onClick: function onClick(event) {\n          return _this3.handleSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }) : React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"button add-button\",\n        onClick: function onClick(event) {\n          return _this3.handleSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"cancel\",\n        value: \"Cancel\",\n        readOnly: true,\n        className: \"button cancel-button\",\n        onClick: function onClick(event) {\n          _this3.props.handlecityNoAdd();\n\n          _this3.stateClear();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return AddcityModal;\n}(React.Component);\n\n;\nexport default AddcityModal;","map":{"version":3,"sources":["/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Modals/AddPropertyModal/addpropertymodal.js"],"names":["React","Select","css","validate","propertyname","address","city","province","rentablearea","storeys","length","AddcityModal","props","onpropertynameChange","event","setState","value","propertynamename","console","log","state","oncityChange","cityname","fetch","method","headers","body","JSON","stringify","then","response","json","addresss","forEach","element","dropDownEle","label","addressDropdown","push","cityLoaded","onaddressChange","onprovinceChange","brokername","onrentableareaChange","handleBlur","field","touched","handleSubmit","canBeSubmitted","preventDefault","deal","handlecityNoAdd","stateClear","propertynameDropdown","cityDropdown","provinceDropdown","rentableareaDropdown","loaded","property","properties","provinces","rentableareas","errors","isDisabled","Object","keys","some","x","shouldMarkError","showHideClassName","show","bind","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './addpropertymodal.css';\nimport Select from 'react-select';\nimport {css} from 'emotion';\n\nfunction validate(propertyname, address, city, province, rentablearea, storeys) { \n  return {\n    propertyname: (propertyname.length === 0),\n    address: (address.length === 0),\n    city: (city.length === 0),\n    province: (province.length === 0),\n    rentablearea: (rentablearea.length === 0),\n    storeys: (storeys.length === 0),\n  };\n}\n\nclass AddcityModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      propertyname: '',\n      address: '',\n      city: '',\n      province: '',\n      rentablearea: '',\n      touched: {\n        propertyname: false,\n        address: false,\n        city: false,\n        province: false,\n        rentablearea: false\n      },\n      propertynameDropdown: [],\n      cityDropdown: [],\n      addressDropdown: [],\n      provinceDropdown: [],\n      rentableareaDropdown: [],\n      cityLoaded: false,\n      loaded: false,\n    }\n  }\n\n  async componentDidMount() {\n\n    await fetch('http://localhost:3000/addpropertymodal/propertyname', {\n      method: 'get',\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then(response => response.json())\n      .then(property => {\n        property.forEach(element => {\n          let dropDownEle = { label: element[\"propertynamename\"], value: element };\n          this.state.propertynameDropdown.push(dropDownEle);\n        });      \n      })\n\n    await fetch('http://localhost:3000/addpropertymodal/city', {\n      method: 'get',\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then(response => response.json())\n      .then(properties => {\n        properties.forEach(element => {\n          let dropDownEle = { label: element[\"cityname\"], value: element };\n          this.state.cityDropdown.push(dropDownEle);\n        });      \n      })\n\n    await fetch('http://localhost:3000/addpropertymodal/province', {\n      method: 'get',\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then(response => response.json())\n      .then(provinces => {\n        provinces.forEach(element => {\n          let dropDownEle = { label: element[\"brokername\"], value: element };\n          this.state.provinceDropdown.push(dropDownEle);\n        });      \n      })\n\n    await fetch('http://localhost:3000/addpropertymodal/rentablearea', {\n      method: 'get',\n      headers: {'Content-Type': 'application/json'},\n    })\n      .then(response => response.json())\n      .then(rentableareas => {\n        rentableareas.forEach(element => {\n          let dropDownEle = { label: element[\"brokername\"], value: element };\n          this.state.rentableareaDropdown.push(dropDownEle);\n        });      \n      })\n\n    this.setState({loaded: true})\n\n  }\n\n  onpropertynameChange = (event) => {\n    this.setState({propertyname: event.value.propertynamename})\n    console.log(this.state.propertyname)\n  }\n\n  oncityChange = (event) => {\n    this.setState({\n      city: event.value.cityname,\n    })\n\n      fetch('http://localhost:3000/addpropertymodal/address', {\n        method: 'post',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify({\n          city: event.value.cityname,\n        })\n      })\n        .then(response => response.json())\n        .then(addresss => {\n          addresss.forEach(element => {\n            let dropDownEle = { label: element[\"address\"], value: element };\n            this.state.addressDropdown.push(dropDownEle);\n          });  \n          this.setState({cityLoaded: true})\n        })\n    \n  }\n\n  onaddressChange = (event) => {\n    this.setState({address: event.value.address})\n  }\n\n  onprovinceChange = (event) => {\n    this.setState({province: event.value.brokername})\n  }\n\n  onrentableareaChange = (event) => {\n    this.setState({rentablearea: event.value.brokername})\n  }\n\n  handleBlur = (field) => (event) => {\n      this.setState({\n        touched: { ...this.state.touched, [field]: true},\n      });   \n  }\n \n  canBeSubmitted() {\n    const errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.province, this.state.rentablearea);\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\n    return !isDisabled;\n  }\n\n\n  handleSubmit = (event) => {\n    if (!this.canBeSubmitted()) {\n      this.setState({\n        touched: { ...this.state.touched, 'propertyname': true, 'city': true, 'address': true, 'province': true, 'rentablearea': true}\n      })\n      event.preventDefault();\n      return;\n\n    }\n\n    fetch('http://localhost:3000/dealsedit', {\n      method: 'post',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({\n        propertyname: this.state.propertyname,\n        city: this.state.city,\n        address: this.state.address,\n        province: this.state.province,\n        rentablearea: this.state.rentablearea,\n      })\n    })\n      .then(response => response.json())\n      .then(deal => {\n        if(deal) {\n          this.props.handlecityNoAdd();\n        } else { console.log(\"uhoh\")}\n      })\n    this.stateClear();\n  }\n\n  stateClear = () => {\n    this.setState({\n      touched: false,\n      propertyname: '',\n      address: '',\n      city: '',\n      province: '',\n      rentablearea: '',\n    });\n  }\n\n  render() {\n    const errors = validate(this.state.propertyname, this.state.address, this.state.city, this.state.province, this.state.rentablearea);\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\n    const shouldMarkError = (field) => {\n      return errors[field] && this.state.touched[field];\n    }\n\n    const showHideClassName = this.props.show ? 'deal-modal deal-display-block' : 'deal-modal deal-display-none';\n    return (\n      <div className={showHideClassName}>\n        <React.Fragment>\n        <section className='deal-modal-main'>\n         { this.state.loaded && (\n           <React.Fragment>\n            <div className=\"deal-modal-title\">Add New Deal</div>,\n            <div className=\"deal-modal-body\">\n\n              <p className={shouldMarkError('propertyname') ? \"deal-input-title-error\" : \"deal-input-title\"}>propertyname Name:</p>\n              <Select \n                options={this.state.propertynameDropdown}\n                className=\"deal-form-input\"\n                classNamePrefix=\"deal-form-input\"\n                onChange={this.onpropertynameChange.bind(this)}\n                onBlur={this.handleBlur('propertyname')}\n              />\n\n              <p className={shouldMarkError('city') ? \"deal-input-title-error\" : \"deal-input-title\"}>city:</p>\n              <Select \n                options={this.state.cityDropdown}\n                className=\"deal-form-input\"\n                classNamePrefix=\"deal-form-input\"\n                onChange={this.oncityChange.bind(this)}\n                onBlur={this.handleBlur('city')}\n              />\n\n              { this.state.cityLoaded ? ([\n                  <p className={shouldMarkError('address') ? \"deal-input-title-error\" : \"deal-input-title\"}>address:</p>,\n                  <Select \n                    options={this.state.addressDropdown}\n                    className=\"deal-form-input\"\n                    classNamePrefix=\"deal-form-input\"\n                    onChange={this.onaddressChange.bind(this)}\n                    onBlur={this.handleBlur('address')}\n                  />\n                ]) : null }\n\n              <p className={shouldMarkError('province') ? \"deal-input-title-error\" : \"deal-input-title\"}>Landlord Broker:</p>\n              <Select \n                options={this.state.provinceDropdown}\n                className=\"deal-form-input\"\n                classNamePrefix=\"deal-form-input\"\n                onChange={this.onprovinceChange.bind(this)}\n                onBlur={this.handleBlur('province')}\n              />\n\n              <p className={shouldMarkError('rentablearea') ? \"deal-input-title-error\" : \"deal-input-title\"}>propertyname Broker:</p>\n              <Select \n                options={this.state.rentableareaDropdown}\n                className=\"deal-form-input\"\n                classNamePrefix=\"deal-form-input\"\n                onChange={this.onrentableareaChange.bind(this)}\n                onBlur={this.handleBlur('rentablearea')}\n              />\n\n              <div className=\"line\"></div>\n              <div className=\"buttons\">\n\n              { isDisabled ? (\n                <input \n                  type=\"submit\" \n                  className=\"button add-button-error\"\n                  onClick={ (event) => this.handleSubmit(event)}\n                />\n              ) : (\n                <input \n                  type=\"submit\" \n                  className=\"button add-button\"\n                  onClick={ (event) => this.handleSubmit(event)}\n                />\n              )}\n\n              <input\n                type=\"cancel\"\n                value=\"Cancel\"\n                readOnly\n                className=\"button cancel-button\"\n                onClick={ (event) => { this.props.handlecityNoAdd(); this.stateClear(); }}\n              />\n\n              </div>\n            </div>\n        </React.Fragment>\n       )}\n        </section>\n        </React.Fragment>\n      </div>\n    );\n  }\n};\n\nexport default AddcityModal;"]},"metadata":{},"sourceType":"module"}