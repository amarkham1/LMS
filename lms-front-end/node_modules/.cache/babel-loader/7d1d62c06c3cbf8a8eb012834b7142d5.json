{"ast":null,"code":"import _classCallCheck from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Properties/properties.js\";\nimport React from 'react';\nimport './properties.css';\nimport PropertyEdit from './PropertyEdit/propertyedit.js';\nimport AddPropertyModal from '../Modals/AddPropertyModal/addpropertymodal.js';\nimport PropertyTable from './propertytable.js';\n\nvar Properties =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Properties, _React$Component);\n\n  function Properties(props) {\n    var _this;\n\n    _classCallCheck(this, Properties);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Properties).call(this, props));\n    _this.state = {\n      propertiesdata: [],\n      isLoading: true,\n      propertySelected: '',\n\n      /* set to '' */\n      propertyadd: false,\n      propertyedit: false\n      /* set to false */\n\n    };\n    _this.handlePropertyAdd = _this.handlePropertyAdd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePropertyNoAdd = _this.handlePropertyNoAdd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePropertyClick = _this.handlePropertyClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePropertyEdit = _this.handlePropertyEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Properties, [{\n    key: \"fetchProperties\",\n    value: function fetchProperties() {\n      var _this2 = this;\n\n      fetch('http://localhost:3000/deals', {\n        method: 'get',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (deals) {\n        _this2.setState({\n          dealsdata: deals,\n          isLoading: false\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchProperties();\n    }\n  }, {\n    key: \"handlePropertyClick\",\n    value: function handlePropertyClick(row) {\n      this.setState({\n        propertySelected: row.id\n      });\n    }\n  }, {\n    key: \"handlePropertyAdd\",\n    value: function handlePropertyAdd() {\n      this.setState({\n        propertyadd: true\n      });\n    }\n  }, {\n    key: \"handlePropertyNoAdd\",\n    value: function handlePropertyNoAdd() {\n      this.setState({\n        propertyadd: false\n      });\n    }\n  }, {\n    key: \"handlePropertyEdit\",\n    value: function handlePropertyEdit() {\n      this.setState({\n        propertyedit: true\n      });\n    }\n  }, {\n    key: \"onEditProperty\",\n    value: function onEditProperty() {\n      var _this3 = this;\n\n      fetch('http://localhost:3000/deals/:id', {\n        method: 'get',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: this.state.dealSelected.id\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (user) {\n        if (user.id) {\n          _this3.setState({\n            signInError: false\n          });\n\n          _this3.props.loadUser(user);\n\n          _this3.props.onRouteChange('deals/:id');\n        } else {\n          _this3.setState({\n            signInError: true\n          }); // this.props.onRouteChange('signin');\n\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var onRouteChange = this.props.onRouteChange;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, !this.state.propertyedit ? React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(AddPropertyModal, {\n        handlePropertyNoAdd: this.handlePropertyNoAdd,\n        show: this.state.propertyadd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"dealslist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"deal-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"btn\",\n        onClick: this.handlePropertyAdd,\n        type: \"button\",\n        value: \"ADD PROPERTY\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), this.state.propertySelected && React.createElement(\"input\", {\n        className: \"btn\",\n        type: \"button\",\n        value: \"EDIT PROPERTY\",\n        onClick: this.handlePropertyEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), !this.state.isLoading && React.createElement(PropertyTable, {\n        propertiesdata: this.state.propertiesdata,\n        handlePropertyClick: this.handlePropertyClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }))) : React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(PropertyEdit, {\n        propertyid: this.state.propertySelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Properties;\n}(React.Component);\n\nexport default Properties;","map":{"version":3,"sources":["/Users/andrewmarkham/Desktop/LMS/lms-front-end/src/components/Properties/properties.js"],"names":["React","PropertyEdit","AddPropertyModal","PropertyTable","Properties","props","state","propertiesdata","isLoading","propertySelected","propertyadd","propertyedit","handlePropertyAdd","bind","handlePropertyNoAdd","handlePropertyClick","handlePropertyEdit","fetch","method","headers","then","response","json","deals","setState","dealsdata","fetchProperties","row","id","body","JSON","stringify","dealSelected","user","signInError","loadUser","onRouteChange","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './properties.css';\nimport PropertyEdit from './PropertyEdit/propertyedit.js';\nimport AddPropertyModal from '../Modals/AddPropertyModal/addpropertymodal.js';\nimport PropertyTable from './propertytable.js';\n\nclass Properties extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {\n\t\t\tpropertiesdata: [],\n\t\t\tisLoading: true,\n\t\t\tpropertySelected: '', /* set to '' */\n\t\t\tpropertyadd: false,\n\t\t\tpropertyedit: false, /* set to false */\n\t\t}\n\t\tthis.handlePropertyAdd = this.handlePropertyAdd.bind(this);\n\t\tthis.handlePropertyNoAdd = this.handlePropertyNoAdd.bind(this);\n\t\tthis.handlePropertyClick = this.handlePropertyClick.bind(this);\n\t\tthis.handlePropertyEdit = this.handlePropertyEdit.bind(this);\n\t}\n\n\tfetchProperties() {\n\t\tfetch('http://localhost:3000/deals', {\n\t\t\tmethod: 'get',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t})\n\t\t    .then(response => response.json())\n\t\t    .then(deals => {\n\t\t  \t    this.setState({\n\t\t  \t    \tdealsdata: deals,\n\t\t  \t    \tisLoading: false,\n\t\t  \t    })\n\t\t  \t})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchProperties();\n\t}\n\n\thandlePropertyClick(row) {\n\t\tthis.setState({\n\t\t\tpropertySelected: row.id,\n\t\t})\n\t}\n\n\thandlePropertyAdd() {\n\t\tthis.setState({propertyadd: true});\n\t}\n\n\thandlePropertyNoAdd() {\n\t\tthis.setState({propertyadd: false});\n\t}\n\n\thandlePropertyEdit() {\n\t\tthis.setState({ propertyedit: true })\n\t}\n\n\tonEditProperty() {\n\t\tfetch('http://localhost:3000/deals/:id', {\n\t\t\t\tmethod: 'get',\n\t\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tid: this.state.dealSelected.id,\n\t\t\t\t})\n\t\t})\n\t\t    .then(response => response.json())\n\t\t    .then(user => {\n\t\t  \t  if(user.id) {\n\t\t  \t  \tthis.setState({ signInError: false})\n\t\t  \t\tthis.props.loadUser(user)\n\t\t  \t\tthis.props.onRouteChange('deals/:id');\n\t\t  \t  } else {\n\t\t  \t  \tthis.setState({ signInError: true })\n\t\t  \t  \t// this.props.onRouteChange('signin');\n\t\t  \t  }\n\t\t    })\n\t}\n\n\trender() {\n\t  const { onRouteChange } = this.props;\n\t\treturn (\n\t\t  <div>\n\t\t\t  { !this.state.propertyedit ? \n\t\t\t  \t(\n\t\t\t  \t  <div className=\"container\">\n\t\t\t\t  <AddPropertyModal handlePropertyNoAdd={this.handlePropertyNoAdd} show={this.state.propertyadd}/>\n\t\t\t\t\t<div className=\"dealslist\">\n\t\t\t\t \t  <div className=\"deal-buttons\">\n\t\t\t\t\t\t<input className=\"btn\" onClick={this.handlePropertyAdd} type=\"button\" value=\"ADD PROPERTY\" />\n\t\t\t\t\t\t{ this.state.propertySelected &&\n\t\t\t\t\t\t\t<input className=\"btn\" type=\"button\" value=\"EDIT PROPERTY\" onClick={this.handlePropertyEdit}/>\n\t\t\t\t\t\t}\n\t\t\t\t\t  </div>\n\t\t\t\t\t  { !this.state.isLoading && \n\t\t\t\t\t  \t<PropertyTable propertiesdata={this.state.propertiesdata} handlePropertyClick={this.handlePropertyClick} />\n\t\t\t\t\t  }\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t) : (\n\t\t\t\t  <div className=\"container\">\n\t\t\t\t    <PropertyEdit propertyid={this.state.propertySelected} />\n\t\t\t\t  </div>\n\t\t\t\t)\n\t\t\t  }\n\t \t  </div>\n\t\t);\n\t}\n}\n\nexport default Properties;"]},"metadata":{},"sourceType":"module"}